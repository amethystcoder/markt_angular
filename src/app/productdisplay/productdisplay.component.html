<div class="viewing content">
    <app-loader *ngIf="!producttodisplay"></app-loader>
    <div class="main-det" *ngIf="producttodisplay">
        <div class="first-section">
            <h1>{{producttodisplay.product_name}}</h1>
            <div class="sm-det">
                <div class="typ-price">
                    <p class="p-n-bold" id="p-type">{{producttodisplay.product_type}}</p>
                    <div id="sep-div"></div>
                    <p class="p-n-bold">{{producttodisplay.product_price}}</p>
                </div>
                <div class="qty-cont">
                    <p class="p-n-bold">Qty</p> 
                    <button class="inc-dec inv-button-active" (click)="incquantity()">+</button>
                    <p class="p-n-bold">{{qty}}</p>
                    <button class="inc-dec inv-button-active" (click)="decquantity()">-</button>
                </div>
            </div>
            <span class="bar">
                <button class="button-active">Chat Seller</button>
                <button class="button-active">Favorite</button>
            </span>
            <button class="baskt-add button-active" [disabled]="productaddedtocart" (click)="addtocart()">Add to Basket</button>
            <div id="prod-desc">
                <h1>Product description</h1>
                <p>{{producttodisplay.product_description}}</p>
            </div>
        </div>
        <div class="sec-section">
            <div id="prod-img-nd-desc">
                    <img [src]="'http://localhost/markt_php/uploads/'+producttodisplay!.product_images[productimageposcounter]+'small.jpg'" 
                    alt="product_image" id="main-prod-img">
                <div id="nav-prod-images">
                    <div class="change-image" (click)="decimgcounter()">
                        <svg width="76" height="80" viewBox="0 0 76 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g filter="url(#filter0_d_701_22)">
                            <line x1="42.891" y1="3.53553" x2="7.53566" y2="38.8909" stroke="white" stroke-opacity="0.75" stroke-width="10"/>
                            <line x1="7.8871" y1="32.1656" x2="43.2424" y2="67.521" stroke="white" stroke-opacity="0.75" stroke-width="10"/>
                            </g>
                            <defs>
                            <filter id="filter0_d_701_22" x="0" y="0" width="50.7773" height="79.0566" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                            <feOffset dy="4"/>
                            <feGaussianBlur stdDeviation="2"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_701_22"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_701_22" result="shape"/>
                            </filter>
                            </defs>
                        </svg>
                    </div>
                    <div class="change-image" (click)="incimgcounter()">
                        <svg width="76" height="80" viewBox="0 0 76 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g filter="url(#filter0_d_701_21)">
                            <line x1="32.1676" y1="67.524" x2="67.5229" y2="32.1687" stroke="white" stroke-opacity="0.75" stroke-width="10"/>
                            <line x1="67.1715" y1="38.8939" x2="31.8162" y2="3.53859" stroke="white" stroke-opacity="0.75" stroke-width="10"/>
                            </g>
                            <defs>
                            <filter id="filter0_d_701_21" x="24.2812" y="0.00292969" width="50.7773" height="79.0566" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                            <feOffset dy="4"/>
                            <feGaussianBlur stdDeviation="2"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_701_21"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_701_21" result="shape"/>
                            </filter>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="sold-by">
        <h1>View Seller</h1>
        <div id="seller-link">
            <div class="in-seller-link">
                <div id="seller-img"></div>
            </div>
            <div class="in-seller-link">
                <h1>Sold by: {{producttodisplay.seller_name}}</h1>
                <button class="button-active" routerLink="/sellerview" [queryParams]="[producttodisplay.seller_id]">View Seller Page</button>
            </div>
        </div>
    </div>
    <div class="oth-like">
        <h2>Products Like this</h2>
        <div class="products-container">
            <div class="product" *ngFor="let product of likeproduct" 
            routerLink="/display" [queryParams]="[product.product_id]">
                <img [src]="'http://localhost/markt_php/uploads/'+product.product_images[0]+'small.jpg'" 
                alt="" srcset="" class="product-image" loading="lazy">
                <div class="product-details">
                    <h3>{{product.product_name}}</h3>
                    <span class="bar">
                        <p>{{product.product_price}}</p>
                    </span>
                </div></div>
        </div>
        <div
        infiniteScroll 
        [infiniteScrollDistance] = "2"
        [infiniteScrollThrottle] = "1000"
        (scrolled)="onscroll()"> 
    </div>
    </div>
</div>

